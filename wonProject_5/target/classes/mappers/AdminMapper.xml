<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.won.mapper.AdminMapper">

	<!-- 회원 수 조회 -->
	<select id = "memberCount" resultType = "Integer">
		select count(*)
		from member		
	</select>
	
	<!-- 구독자 수 조회 -->
	<select id="subCount" resultType = "Integer">
		select count(*)
		from sub
		where s_ing = #{s_ing}
	</select>
	
	<!-- 회원 리스트 -->
	<select id = "memberList" resultType = "com.won.model.MemberVO">
		select * from member 
	</select>
	
	<!-- 회원 코멘트 작성 -->
	<update id = "memberState" parameterType="com.won.model.MemberVO">
	<![CDATA[
		update member 
		set m_state = #{m_state}
		where id = #{id}
	]]>
	</update>
	
	<!-- 회원 하나 고르기 -->
	<select id="memberOne" resultType = "com.won.model.MemberVO">
		select * 
		from member
		where id = #{id}
	</select>

	<!-- 회원 목록 총 갯수 -->
	<select id ="pageCount" resultType="int">
		select count(id) from member
	</select>
	
	<!-- 회원 목록 + 페이징
	<select id="pageMember" parameterType="hashMap" resultType="com.won.model.MemberVO">
		<![CDATA[
		select *
		from (
			select * 
			from member
			order by id asc)
		where rownum <= 10;
		]]>
	</select> -->
	
	<!-- id 검색 -->
	<select id="memberSearch" parameterType="String" resultType="com.won.model.MemberVO">		
			select *
			from member
			<if test='serarchType.equals("id")'>
				where id LIKE '%' || #{keyword} || '%' 
			</if> 
			<if test='serarchType.equals("name")'>
				where m_name LIKE '%' || #{keyword} || '%'
			</if> 
	</select>

</mapper>